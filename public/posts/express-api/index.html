<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>
    
    Learning to make a Temperature Converting API using Express.js | Blog
    
</title>



<link rel="stylesheet" href="/assets/combined.min.772d8826ee2eef88a6e9a6276255a832f2c7a89f602a131e1eea95f2bf123e74.css" media="all">



  </head>

  

  
  
  

  <body class="auto">

    <div class="content">
      <header>
        

<div class="header">
    <h1 class="header-title">Blog</h1>

    <div class="flex">
        

        
        
        <p class="small ">
            <a href="/">
                /home
            </a>
        </p>
        
        <p class="small ">
            <a href="/posts">
                /posts
            </a>
        </p>
        
        
    </div>

</div>
      </header>

      <main class="main">
        




<div class="breadcrumbs">
    
    <a href="/">Home</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a href="/posts/">Posts</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a class="breadcrumbs-current" href="/posts/express-api/">Learning to make a Temperature Converting API using Express.js</a>
</div>


<div >

  <div class="single-intro-container">

    

    <h1 class="single-title">Learning to make a Temperature Converting API using Express.js</h1>
    

    

    <p class="single-readtime">
      
      
      
      <time datetime="2022-06-12T00:00:06&#43;05:30">June 12, 2022</time>
      

      
    </p>

  </div>

  

  

  

  

  <div class="single-content">
    <p>One of the first few tasks of the internship I recently got, was to develop a simple RESTful API which converted a given temperature from Farhenheit to Celsius and vice versa.
<figure><img src="https://i.morioh.com/8c8203b86e.png">
</figure>
</p>
<p>The choice of technology was left up to me. Having worked with <strong>Node and Express.js</strong> before, I decided it would be convenient for me to work on the API using these. It would be easier developing an understanding over the API structure and its nuances, without having to worry about learning the syntax of a new language.</p>
<h3 id="how-i-learned-developing-the-api">How I learned developing the API</h3>
<p>Developing an API was a new and challenging task for me since I&rsquo;d never worked on one before.
Multiple Google searches and YouTube videos later, I was able to&hellip;  <!-- raw HTML omitted --> <!-- raw HTML omitted -->
&hellip;differentiate between a GET and POST request.<br>
<!-- raw HTML omitted -->
Understanding the different types of requests and how they behave with the data is essential. The API I&rsquo;m working with mainly operates on these two requests -</p>
<ol>
<li><strong>GET</strong> - to retrieve data from the server at the specified source</li>
<li><strong>POST</strong> - to create or update data on the server at the specified source</li>
</ol>
<figure><img src="https://s3-us-west-2.amazonaws.com/assertible/blog/swagger-petstore-store-endpoints.png">
</figure>

<h4 id="basic-api-structure">Basic API Structure</h4>
<p>Our API takes in temperature value as a <em>request</em> parameter, and gives us the converted value as a <em>response</em>.<br>
We specify two endpoints for the different conversions</p>
<ul>
<li>Celsius to Fahrenheit (&hellip;/CtoF)</li>
<li>Fahrenheit to Celsius (&hellip;/FtoC)<br>
&hellip;or we could go bonkers and add Kelvin conversions too.</li>
</ul>
<p>The code is structured something like this -</p>
<p>Importing the <em>Express.js</em> Node module into our file and specifying the port at which to host our server.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* index.js */</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> express = require(<span style="color:#666;font-style:italic">&#34;express&#34;</span>);
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> app = express();
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> PORT = 8080;
</span></span><span style="display:flex;"><span>app.use(express.json());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Listen for requests at the specified PORT
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>app.listen(PORT, () =&gt; console.log(<span style="color:#666;font-style:italic">`Listening at localhost:</span><span style="color:#666;font-style:italic">${</span>PORT<span style="color:#666;font-style:italic">}</span><span style="color:#666;font-style:italic">`</span>));
</span></span></code></pre></div><p>Using <code>express.json()</code> essentially allows our server to parse the JSON which comes in the request body, or we&rsquo;re met with an error which says</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>TypeError<span style="">:</span> Cannot read properties of undefined (reading <span style="color:#666;font-style:italic">&#39;&lt;object&gt;&#39;</span>)
</span></span></code></pre></div><p>(I learnt this the hard way, struggling with this one line of code for a few hours as my API refused to accept JSON in the request). <!-- raw HTML omitted --><!-- raw HTML omitted -->
Before adding code for the conversion, let&rsquo;s test a simple request to our API to make sure everything&rsquo;s A-OK.</p>
<p>Implementing a simple GET request to the API -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* index.js */</span>
</span></span><span style="display:flex;"><span>app.get(<span style="color:#666;font-style:italic">&#39;/&#39;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  res.send(<span style="color:#666;font-style:italic">&#39;A-Ok&#39;</span>)
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>Let&rsquo;s run the server using <code>node index.js</code> and then fire up Postman to check the call to our API -
<figure class="center-image"><img src="https://user-images.githubusercontent.com/70942982/173202113-c30f9f4d-6228-47bb-b0b9-1f085a65b154.png">
</figure>
</p>
<p>Great, everything works.</p>
<h4 id="temperature-conversions">Temperature Conversions</h4>
<p>Let&rsquo;s add code for the conversion now. Even though the demonstration at hand is a small example, we&rsquo;ll split it into two files for cleaner and maintainable code at scale.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* index.js */</span>
</span></span><span style="display:flex;"><span>app.use(<span style="color:#666;font-style:italic">&#39;/FtoC&#39;</span>, FtoC)
</span></span><span style="display:flex;"><span>app.use(<span style="color:#666;font-style:italic">&#39;/CtoF&#39;</span>, CtoF)
</span></span></code></pre></div><p>Taking the first line as an example to explain what&rsquo;s going on here.<br>
This piece of code tells our server to handle all requests which are received at the endpoint <code>/FtoC</code>, using our Express router <code>FtoC</code>, which is provided as a callback function.<br>
For this ⬆️ to work, we need to first make our router functions in a separate file and then import the router in <code>index.js</code>.</p>
<h5 id="router-function">Router Function</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* tempConverter/FtoC.js */</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> router = require(<span style="color:#666;font-style:italic">&#39;express&#39;</span>).Router();
</span></span></code></pre></div><p>Here we&rsquo;re creating an Express router instance to handle the requests received.</p>
<p>And then we handle our GET request which contains the value for temperature in the request body -</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* tempConverter/FtoC.js */</span>
</span></span><span style="display:flex;"><span>router.get(<span style="color:#666;font-style:italic">&#39;/&#39;</span>, (req, res) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold;font-style:italic;text-decoration:underline">let</span> reqF = req.body.fahrenheit
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold;font-style:italic;text-decoration:underline">let</span> resC = (reqF - 32) * 5/9
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  res.status(200).send({
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;enteredFahrenheit&#34;</span>: <span style="color:#666;font-style:italic">`</span><span style="color:#666;font-style:italic">${</span> reqF <span style="color:#666;font-style:italic">}</span><span style="color:#666;font-style:italic">`</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;calculatedCelsius&#34;</span>: <span style="color:#666;font-style:italic">`</span><span style="color:#666;font-style:italic">${</span> resC <span style="color:#666;font-style:italic">}</span><span style="color:#666;font-style:italic">`</span>
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>module.exports = router
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>We are storing the Fahrenheit value from the request body into a variable <code>reqF</code> (stands for &lsquo;Request Fahrenheit&rsquo;), performing the required calculation for Celsius conversion and storing it into the variable <code>resC</code> (stands for &lsquo;Response Celsius&rsquo;).  <!-- raw HTML omitted --><!-- raw HTML omitted -->
We&rsquo;re then sending a response back from the server -  a JSON object which contains Fahrenheit value entered and the output Celsius value. <!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h5 id="important-note-to-self">Important Note to Self</h5>
<p>It took me a while to understand why we were taking <code>'/'</code> as the request route, instead of <code>/FtoC</code> in our router file.
That&rsquo;s because <code>index.js</code> is pointing our callback function to <code>/FtoC</code> already.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* index.js */</span>
</span></span><span style="display:flex;"><span>app.use(<span style="color:#666;font-style:italic">&#39;/FtoC&#39;</span>, FtoC)
</span></span></code></pre></div><p>which makes <code>/FtoC</code> the root endpoint for our router function. Hence we specify <code>'/'</code> as the route for our router function to operate on.  <!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>Before we test the API, we need to import our router function into <code>index.js</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#888;font-style:italic">/* index.js */</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> FtoC = require(<span style="color:#666;font-style:italic">&#39;./tempConverter/FtoC&#39;</span>)
</span></span></code></pre></div><h3 id="testing-the-api">Testing the API</h3>
<p>The code in <code>tempConverter/FtoC.js</code> tells us we need a Fahrenheit object in our request body.</p>
<p>Let&rsquo;s make the GET request to <code>localhost:8080/FtoC</code> using Postman with</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    &#34;fahrenheit&#34;: -40
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>in the request body.</p>
<figure class="center-image"><img src="https://user-images.githubusercontent.com/70942982/173204187-a3703fa6-269e-49de-b87d-4b04c2ebbe7c.png">
</figure>

<p>We&rsquo;re getting the output Celsius value equal to the input Fahrenheit value at -40. This tells us two things.</p>
<ol>
<li>Our API is working as expected!</li>
<li>Fun fact : Fahrenheit and Celsius are equal at -40.</li>
</ol>
<p>Similarly, the code for Celsius to Fahrenheit conversion would require us to create a router function in a new file, and then importing the router in our <code>index.js</code> file, specifying the endpoint and callback function.</p>

    
  </div>

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


      </main>
    </div>

    <footer>
      <p>Fueled by coffee, code and my favourite subreddits,
    powered by
    <a href="https://gohugo.io/">Hugo</a>
</p>


    </footer>

  </body>

  <script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

</html>